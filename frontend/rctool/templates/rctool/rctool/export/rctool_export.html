{% extends 'rctool/base.html' %}
{% load static %}


{% block content %}
<div class="container-xl mt-1 mr-5 ml-5">
    <div class="tab-bar-container" style="display:flex;">
        <ul class="tab-bar-list">
            <li class="tab-bar-item"><a href="{% url 'rctool_import' 0 %}">import</a></li>
            <li class="tab-bar-item" id="develop-tab"><a href="#" onclick="passToDevelop()">develop</a></li>
            <li class="tab-bar-item-current"><a href="{% url 'rctool_export_initialize' %}">export</a></li>
        </ul>
    </div>

    <div style="background-color: #FFFFFF; padding-left:10px; padding-right:10px;">
        <div class="row justify-content-md-center" style="padding: 20px;">
            <div div class="col-12 col-sm-12 col-md-11 col-lg-8 col-xl-8">
                <div class="card">
                    <h6 class="card-header text-center" style="background-color: #758fa8; color: #FFFFFF; height:30px; font-size:12.5px; padding-top:7px;">Export</h6>
                    <div class="card-body pt-3 col-12 col-sm-12 col-md-11 col-lg-8 col-xl-8" style="margin: auto;">
                        <div syle="flex: 1">
                            <form method="post" id="export-form" action="./output" target="_blank">
                                <div class="form-group">
                                    {% csrf_token %}
                                    <label for="export_filetype" class="form-label" style="font-size:11.5px;">export type *</label>
                                    {{form.export_filetype}}
                                    <label for="export_filename" class="form-label" style="font-size:11.5px; margin-top:15px;">file name *</label>
                                    {{form.export_filename}}

                                    <div id="toggle-export-div" style="display: none;">
                                        <label class="form-label" style="font-size:11.5px; margin-top:15px;">station name</label>
                                        {{form.export_station_name}}
                                        <label class="form-label" style="font-size:11.5px; margin-top:15px;">applicable date range for rating curve</label>
                                        <div style="display: flex;">
                                            <div style="margin-right:5px;">
                                                {{form.export_date_applic_init}}
                                            </div>
                                            <div style="margin-left:5px;">
                                                {{form.export_date_applic_final}}
                                            </div>
                                        </div>
                                    </div>

                                    <input type="hidden" id="table_dict-to-output" name="table_dict-to-output" value="{{ table_dict }}">
                                    <input type="hidden" id="rc_data-to-output" name="rc_data-to-output" value="{{ rc_data }}">
                                    <input type="hidden" id="adjust_seg-to-output" name="adjust_seg-to-output" value="{{ adjust_seg }}">
                                    <input type="hidden" id="breakpoint1-to-output" name="breakpoint1-to-output" value="{{ breakpoint1 }}">
                                    <input type="hidden" id="fielddatacsv-to-output" name="fielddatacsv-to-output" value="{{ fielddatacsv }}">
                                    <input type="hidden" id="rc_output" name="rc_output" value="{{ rc_output }}">
                                </div>

                                <p class="text-small">* required</p>
                                <div class="form-group">
                                    <button class="btn btn-primary btn-block" style="background-color: #6c747e !important; border-color: #FFFFFF;" type="submit" href="{% url 'rctool_export_output' %}"><small>submit</small></button>
                                </div>

                            </form>
                        </div>
                        <div id="pass-to-develop" style="display:none">
                            <form method="POST" id="import-data-form" enctype="multipart/form-data">
                                {% csrf_token %}
                                <input type="hidden" id="table_dict-to-develop" name="table_dict-to-output" value="{{ table_dict }}">
                                <input type="hidden" id="rc_data-to-develop" name="rc_data-to-output" value="{{ rc_data }}">
                                <input type="hidden" id="adjust_seg-to-develop" name="adjust_seg-to-output" value="{{ adjust_seg }}">
                                <input type="hidden" id="breakpoint1-to-develop" name="breakpoint1-to-output" value="{{ breakpoint1 }}">
                                <input type="hidden" id="fielddatacsv-to-develop" name="fielddatacsv-to-output" value="{{ fielddatacsv }}">
                                <input type="hidden" id="rc_output-to-develop" name="rc_output-to-develop" value="{{ rc_output }}">
                                <button type="submit" onclick="location.href='{% url 'rctool_develop_initialize' %}'" name='to-develop-btn' id='to-develop-btn' onkeydown="return event.key != 'Enter';" hidden></button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



{% endblock %}

{% block scripts %}
<script>
    // SHOW USER INPUTS IF EXPORT PDF SELECTED
    function toggleExportForm(toggleFormVal) {
        var toggleDiv = document.getElementById("toggle-export-div");
        
        toggleDiv.style.display = 'block';
                if (toggleFormVal === "session settings") {
                    toggleDiv.style.display = "none";
                } else {
                    toggleDiv.style.display = "block";
            };
    };

    // PASS DATA TO DEVELOP PAGE IF DEVELOP TAB SELECTED
        function passToDevelop() {
            history.back()
    };

</script>
{% endblock %}